"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSocket = exports.initServer = exports.httpServer = void 0;
const tslib_1 = require("tslib");
const http = (0, tslib_1.__importStar)(require("http"));
const socket_io_1 = require("socket.io");
const app_1 = (0, tslib_1.__importDefault)(require("./app"));
exports.httpServer = new http.Server(app_1.default);
const initServer = async (port) => {
    const server = await exports.httpServer.listen({ port });
    return server;
};
exports.initServer = initServer;
const getSocket = (server) => {
    const io = new socket_io_1.Server(server, { path: '/', cors: { origin: '*', credentials: false } });
    return io;
};
exports.getSocket = getSocket;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHdEQUE2QjtBQUM3Qix5Q0FBbUM7QUFFbkMsNkRBQXdCO0FBRVgsUUFBQSxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQUcsQ0FBQyxDQUFDO0FBRXhDLE1BQU0sVUFBVSxHQUFHLEtBQUssRUFBRSxJQUFZLEVBQUUsRUFBRTtJQUMvQyxNQUFNLE1BQU0sR0FBRyxNQUFNLGtCQUFVLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUVqRCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDLENBQUM7QUFKVyxRQUFBLFVBQVUsY0FJckI7QUFFSyxNQUFNLFNBQVMsR0FBRyxDQUFDLE1BQW1CLEVBQVUsRUFBRTtJQUN2RCxNQUFNLEVBQUUsR0FBRyxJQUFJLGtCQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFeEYsT0FBTyxFQUFFLENBQUM7QUFDWixDQUFDLENBQUM7QUFKVyxRQUFBLFNBQVMsYUFJcEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBodHRwIGZyb20gJ2h0dHAnO1xuaW1wb3J0IHsgU2VydmVyIH0gZnJvbSAnc29ja2V0LmlvJztcblxuaW1wb3J0IGFwcCBmcm9tICcuL2FwcCc7XG5cbmV4cG9ydCBjb25zdCBodHRwU2VydmVyID0gbmV3IGh0dHAuU2VydmVyKGFwcCk7XG5cbmV4cG9ydCBjb25zdCBpbml0U2VydmVyID0gYXN5bmMgKHBvcnQ6IG51bWJlcikgPT4ge1xuICBjb25zdCBzZXJ2ZXIgPSBhd2FpdCBodHRwU2VydmVyLmxpc3Rlbih7IHBvcnQgfSk7XG5cbiAgcmV0dXJuIHNlcnZlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTb2NrZXQgPSAoc2VydmVyOiBodHRwLlNlcnZlcik6IFNlcnZlciA9PiB7XG4gIGNvbnN0IGlvID0gbmV3IFNlcnZlcihzZXJ2ZXIsIHsgcGF0aDogJy8nLCBjb3JzOiB7IG9yaWdpbjogJyonLCBjcmVkZW50aWFsczogZmFsc2UgfSB9KTtcblxuICByZXR1cm4gaW87XG59O1xuIl19